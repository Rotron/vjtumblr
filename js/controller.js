var $=jQuery=require("./js/jquery.min.js"),ipc=require("ipc");$(function(){function t(t){url=l+".tumblr.com",key=m,$.getJSON("http://api.tumblr.com/v2/blog/"+url+"/posts?api_key="+key+"&jsonp=?&tag="+t,function(t){$.each(t,function(t,e){$.each(e,function(t,e){if("posts"==t)for(var a in e){var s=e[a].type,n=e[a].tags;"photo"==s&&$.each(e[a].photos,function(t,e){$.each(e,function(t,e){if("original_size"==t)for(var a in e)if("url"==a){var s=e[a];$(".resources__items").append('<div class="resources__item c-aspect-ratio c-aspect-ratio__16-9"><div class="c-aspect-ratio__inner"><span class="resources__item-button resources__item-button--a"><span class="resources__item-button-inner">A</span></span><span class="resources__item-button resources__item-button--b"><span class="resources__item-button-inner">B</span></span><img src="'+s+'" class="resources__item-image"><span class="resources__item-tags">'+n+"</span></div></div>")}})})}})})})}function e(e,a,s){$(e).on("click",a,function(){var e=$(this).text();$(".tags__items").find(".tags__item").removeClass("tags__item--active"),"list"===s&&$(this).addClass("tags__item--active"),$(".resources__items").empty(),$(".resources__text").text(e),t(e)})}function a(){var t=$(".tags__input-search"),e=$(".tags__items li"),a=null;t.on("keyup",function(){console.log("hoge"),a&&clearTimeout(a),a=setTimeout(function(){a=null;try{var s=new RegExp(t.val(),"i");e.each(function(){var t=this.innerHTML.match(s)?"block":"none";this.style.display!==t&&(this.style.display=t)})}catch(n){}},300)})}function s(t,e){ipc.send("assign-video-window",t,e)}function n(t){$(".resources__items").on("click",".resources__item-button--"+t,function(){var e=$(this).parent().find(".resources__item-image").attr("src"),a=$(this).parent().find(".resources__item-tags").text(),n=a.split(","),i="";s(e,t),$(".channel-"+t+"__image").attr("src",e),$(".master__image--"+t).attr("src",e);for(var c=0;c<n.length;c++)i+='<span class="channel__tag">'+n[c]+"</span>";$(".channel-"+t+"__tags").html(i)})}function i(t,e){ipc.send("send-cue",t,e)}function c(t){$(".channel-"+t+"__cue-button").on("click",function(){var e=$(".channel-"+t+"__image").attr("src"),a=(new Date).getTime();$(".channel-"+t+"__image, .master__image--"+t).attr("src",e+"?"+a),i(t,a)})}function r(t,e){ipc.send("send-clear",t,e)}function _(t){$(".channel-"+t+"__clear-button").on("click",function(){var e="./assets/images/blank_image.png";$(".channel-"+t+"__image").attr("src",e),$(".master__image--"+t).attr("src",e),$(this).parent().find(".channel__tags").children().remove(),r(e,t)})}function o(t){ipc.send("send-ab-fader-val",t)}function u(t){ipc.send("send-bw-fader-val",t)}var l="vjputchom",m="jWsKf6DK1kKYKcHWF6bOAptXVRMFu5ffVneDU8kdNbYUbweyEc",p=new TumblrPosts;p.config({domain:l+".tumblr.com",maxNum:1e3}),p.on("complete",function(){var t,e;e=this.getTags(),t=$('<ul class="tags__items">'),$.each(e,function(e,a){t.append($('<li class="tags__item">').text(a.name))}),t.appendTo($(".tags__items-wrap")),$(".tags__items-loading").remove(),a()}),p.run(),e(".tags__items-wrap",".tags__item","list"),e(".channel__tags",".channel__tag","recommend"),n("a"),n("b"),c("a"),c("b"),_("a"),_("b"),$("#fader__ab").on("input",function(){var t=$("#fader__ab").val();$(".master__image--a").attr("style","opacity:"+(1-t/100)),$(".master__image--b").attr("style","opacity:"+t/100),o(t)}),$("#fader__bw").on("input",function(){var t=$("#fader__bw").val();$(".master__black").attr("style","opacity:"+-t/100),$(".master__white").attr("style","opacity:"+t/100),u(t)})});